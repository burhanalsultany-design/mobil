<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ุงุณุชุจูุงู: ุฅุฏูุงู ุงููุงุชู ูุฌูุฏุฉ ุงูููู / Smartphone Addiction & Sleep Quality</title>
<style>
  :root{--accent:#1e90ff;--accent-dark:#1565c0;--bg1:#e6f2ff;--card:#ffffff}
  body{font-family:Tahoma,Arial,Helvetica,sans-serif;background:linear-gradient(180deg,var(--bg1),#d6ecff);margin:0;padding:20px;color:#222}
  .wrap{max-width:980px;margin:18px auto;padding:18px;background:var(--card);border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.08)}
  h1,h2{margin:8px 0;text-align:center;color:var(--accent-dark)}
  .section{margin:16px 0;padding:12px;border-radius:10px;background:linear-gradient(180deg,#ffffff,#fbfdff);border:1px solid rgba(0,0,0,0.03)}
  .q{margin:10px 0;font-weight:700}
  .opts{display:flex;flex-wrap:wrap;gap:8px;margin-top:6px}
  .opts label{background:#f1f6fb;padding:7px 10px;border-radius:8px;cursor:pointer;border:1px solid rgba(0,0,0,0.04)}
  input[type="radio"]{margin-left:6px}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .small{font-size:0.9rem;color:#555}
  .actions{text-align:center;margin-top:14px}
  button{background:var(--accent);color:#fff;border:none;padding:10px 18px;border-radius:10px;font-size:1rem;cursor:pointer}
  button:hover{background:var(--accent-dark)}
  #resultBox{margin-top:14px;padding:12px;border-radius:10px;background:#fafafa;border:1px solid rgba(0,0,0,0.04)}
  footer{margin-top:16px;text-align:center;color:#444}
  footer a{color:var(--accent);font-weight:700;text-decoration:none}
  .meta{font-size:0.9rem;color:#444;margin-bottom:6px}
  .note{font-size:0.88rem;color:#666;margin-top:8px}
  @media(max-width:560px){.opts{gap:6px}.wrap{padding:12px}}
</style>
</head>
<body>
<div class="wrap">

  <h1>ุงุณุชุจูุงู ุฅุฏูุงู ุงูููุงุชู ูุฌูุฏุฉ ุงูููู</h1>
  <p class="meta" style="text-align:center">Arabic / English โ ูุงูู ุงููููุงุณูู: SAS-SV (10 items) ู PSQI (7 components). ุงููุชุงุฆุฌ ุชุธูุฑ ูุตูุงู ู ุชูุฑุณู ุฅูู Google Sheets.</p>

  <!-- DEMOGRAPHICS -->
  <div class="section">
    <div class="row">
      <div style="flex:1">
        <div class="q">ุงูุงุณู (ุงุฎุชูุงุฑู) โ Name (optional)</div>
        <input id="name" type="text" placeholder="ุงุณู ุงููุดุงุฑู / participant name" style="width:100%;padding:8px;border-radius:8px;border:1px solid #ddd">
      </div>
      <div style="width:180px">
        <div class="q">ุงูุฌูุณ โ Gender</div>
        <div class="opts">
          <label><input type="radio" name="gender" value="male" required> ุฐูุฑ (Male)</label>
          <label><input type="radio" name="gender" value="female"> ุฃูุซู (Female)</label>
          <label><input type="radio" name="gender" value="other"> ุขุฎุฑ (Other)</label>
        </div>
      </div>
    </div>
  </div>

  <form id="mainForm">

    <!-- SAS-SV -->
    <div class="section" id="sasSection">
      <h2>SAS-SV โ ูููุงุณ ุฅุฏูุงู ุงููุงุชู (10 ุจููุฏ)</h2>
      <div class="note">ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุฅุฌุงุจุฉ ูุงุญุฏุฉ ููู ุจูุฏ โ 1 = ุจุดุฏุฉ ูุง ุฃูุงูู โฆ 5 = ุฃูุงูู ุจุดุฏุฉ</div>

      <div class="q">1. ุฃููููู ุจุนุถ ุงูุฃุนูุงู ุงููุฎุทุทุฉ ุจุณุจุจ ุงุณุชุฎุฏุงูู ูููุงุชู ุงูุฐูู. <span class="small">Miss planned work due to smartphone use</span></div>
      <div class="opts">
        <label><input type="radio" name="q1" value="1" required>1</label>
        <label><input type="radio" name="q1" value="2">2</label>
        <label><input type="radio" name="q1" value="3">3</label>
        <label><input type="radio" name="q1" value="4">4</label>
        <label><input type="radio" name="q1" value="5">5</label>
      </div>

      <div class="q">2. ุฃุฌุฏ ุตุนูุจุฉ ูู ุงูุชุฑููุฒ ุฃุซูุงุก ุงูุฏุฑุงุณุฉ ุฃู ุงููุญุงุถุฑุฉ ุจุณุจุจ ุงุณุชุฎุฏุงู ุงููุงุชู. <span class="small">Hard to concentrate in class/assignments</span></div>
      <div class="opts">
        <label><input type="radio" name="q2" value="1" required>1</label>
        <label><input type="radio" name="q2" value="2">2</label>
        <label><input type="radio" name="q2" value="3">3</label>
        <label><input type="radio" name="q2" value="4">4</label>
        <label><input type="radio" name="q2" value="5">5</label>
      </div>

      <div class="q">3. ุฃุดุนุฑ ุจุฃูู ูู ุงููุนุตู ุฃู ุงูุฑูุจุฉ ุฃุซูุงุก ุงุณุชุฎุฏุงู ุงููุงุชู. <span class="small">Pain in wrist/neck while using</span></div>
      <div class="opts">
        <label><input type="radio" name="q3" value="1" required>1</label>
        <label><input type="radio" name="q3" value="2">2</label>
        <label><input type="radio" name="q3" value="3">3</label>
        <label><input type="radio" name="q3" value="4">4</label>
        <label><input type="radio" name="q3" value="5">5</label>
      </div>

      <div class="q">4. ุฃุดุนุฑ ุจุงูุชูุชุฑ ุนูุฏูุง ูุง ุฃููู ููุณููุง ุจุงููุงุชู. <span class="small">Impatient/ fretful when not holding phone</span></div>
      <div class="opts">
        <label><input type="radio" name="q4" value="1" required>1</label>
        <label><input type="radio" name="q4" value="2">2</label>
        <label><input type="radio" name="q4" value="3">3</label>
        <label><input type="radio" name="q4" value="4">4</label>
        <label><input type="radio" name="q4" value="5">5</label>
      </div>

      <div class="q">5. ุฃููุฑ ูู ุงููุงุชู ุญุชู ุนูุฏูุง ูุง ุฃุณุชุฎุฏูู. <span class="small">Think about phone even when not using</span></div>
      <div class="opts">
        <label><input type="radio" name="q5" value="1" required>1</label>
        <label><input type="radio" name="q5" value="2">2</label>
        <label><input type="radio" name="q5" value="3">3</label>
        <label><input type="radio" name="q5" value="4">4</label>
        <label><input type="radio" name="q5" value="5">5</label>
      </div>

      <div class="q">6. ุฃูุถู ููุชูุง ุฃุทูู ููุง ุฎุทุทุช ูู ูู ุงุณุชุฎุฏุงู ุงููุงุชู. <span class="small">Spend longer than intended on phone</span></div>
      <div class="opts">
        <label><input type="radio" name="q6" value="1" required>1</label>
        <label><input type="radio" name="q6" value="2">2</label>
        <label><input type="radio" name="q6" value="3">3</label>
        <label><input type="radio" name="q6" value="4">4</label>
        <label><input type="radio" name="q6" value="5">5</label>
      </div>

      <div class="q">7. ูุฎุจุฑูู ูู ุญููู ุฃููู ุฃุณุชุฎุฏู ุงููุงุชู ูุซูุฑูุง. <span class="small">People tell me I use phone too much</span></div>
      <div class="opts">
        <label><input type="radio" name="q7" value="1" required>1</label>
        <label><input type="radio" name="q7" value="2">2</label>
        <label><input type="radio" name="q7" value="3">3</label>
        <label><input type="radio" name="q7" value="4">4</label>
        <label><input type="radio" name="q7" value="5">5</label>
      </div>

      <div class="q">8. ุฃุณุชุฎุฏู ุงููุงุชู ููุชุฑุฉ ุฃุทูู ููุง ููุช ุฃููู. <span class="small">On smartphone longer than intended</span></div>
      <div class="opts">
        <label><input type="radio" name="q8" value="1" required>1</label>
        <label><input type="radio" name="q8" value="2">2</label>
        <label><input type="radio" name="q8" value="3">3</label>
        <label><input type="radio" name="q8" value="4">4</label>
        <label><input type="radio" name="q8" value="5">5</label>
      </div>

      <div class="q">9. ุฃุณุชุฎุฏู ุงููุงุชู ูููุฑูุจ ูู ุงููุดุงุนุฑ ุงูุณูุจูุฉ ุฃู ุงููุงูุน. <span class="small">Use phone to escape negative feelings</span></div>
      <div class="opts">
        <label><input type="radio" name="q9" value="1" required>1</label>
        <label><input type="radio" name="q9" value="2">2</label>
        <label><input type="radio" name="q9" value="3">3</label>
        <label><input type="radio" name="q9" value="4">4</label>
        <label><input type="radio" name="q9" value="5">5</label>
      </div>

      <div class="q">10. ุฃุดุนุฑ ุจุงูููู ุนูุฏูุง ุฃููู ุจุฏูู ุงููุงุชู. <span class="small">Feel anxious when without phone</span></div>
      <div class="opts">
        <label><input type="radio" name="q10" value="1" required>1</label>
        <label><input type="radio" name="q10" value="2">2</label>
        <label><input type="radio" name="q10" value="3">3</label>
        <label><input type="radio" name="q10" value="4">4</label>
        <label><input type="radio" name="q10" value="5">5</label>
      </div>

      <div class="note">ูุฌุงููุน SAS-SV ุชุชุฑุงูุญ 10โ50. Cut-offs (Kwon 2013): Male โฅ31, Female โฅ33 โ higher = greater smartphone addiction.</div>
    </div>

    <!-- PSQI (7 components based on standard PSQI items) -->
    <div class="section" id="psqiSection">
      <h2>PSQI โ ูููุงุณ ุจูุชุณุจุฑุบ ูุฌูุฏุฉ ุงูููู (7 ูููููุงุช)</h2>
      <div class="note">ุงูุฃุณุฆูุฉ ุงูุชุงููุฉ ุชุชุนูู ุจุงูุนุงุฏุงุช ุฎูุงู ุงูุดูุฑ ุงููุงุถู. ูู ุจูุฏ ูููุชู 0โ3 ููุง ููุถุญ.</div>

      <div class="q">1. ููู ุชููููู ุฌูุฏุฉ ูููู ุจุดูู ุนุงูุ <span class="small">(0=ููุชุงุฒ โฆ 3=ุณูุฆ ุฌุฏูุง)</span></div>
      <div class="opts">
        <label><input type="radio" name="s1" value="0" required>0 ููุชุงุฒ / Very good</label>
        <label><input type="radio" name="s1" value="1">1 ุฌูุฏ / Fairly good</label>
        <label><input type="radio" name="s1" value="2">2 ุณูุฆ / Fairly bad</label>
        <label><input type="radio" name="s1" value="3">3 ุณูุฆ ุฌุฏูุง / Very bad</label>
      </div>

      <div class="q">2. ูู ุฏูููุฉ ุนุงุฏุฉู ุชุณุชุบุฑู ุญุชู ุชุบููุ (ุงุฎุชุฑ ุฃูุฑุจ ูุฆุฉ)</div>
      <div class="opts">
        <label><input type="radio" name="s2" value="0" required>0โ15 min</label>
        <label><input type="radio" name="s2" value="1">16โ30 min</label>
        <label><input type="radio" name="s2" value="2">31โ60 min</label>
        <label><input type="radio" name="s2" value="3">>60 min</label>
      </div>

      <div class="q">3. ูู ุณุงุนุฉ ุชูุงู ูุนูููุง ูู ุงููููุฉ (ูุชูุณุท)ุ</div>
      <div class="opts">
        <label><input type="radio" name="s3" value="0" required>>7 ุณุงุนุงุช</label>
        <label><input type="radio" name="s3" value="1">6โ7 ุณุงุนุงุช</label>
        <label><input type="radio" name="s3" value="2">5โ6 ุณุงุนุงุช</label>
        <label><input type="radio" name="s3" value="3"><5 ุณุงุนุงุช</label>
      </div>

      <div class="q">4. ูุง ุฒูู ุงูููู ุงููุนูู/ููุงุกุฉ ุงูููู (ุจูุงุกู ุนูู ููุงุนูุฏ ุงูููู ูุงูุงุณุชููุงุธ)ุ (ุชูุฑูุจูุง)</div>
      <div class="opts">
        <label><input type="radio" name="s4" value="0" required>ููุงุกุฉ ุนุงููุฉ</label>
        <label><input type="radio" name="s4" value="1">ููุงุกุฉ ุฌูุฏุฉ</label>
        <label><input type="radio" name="s4" value="2">ูููู ูู ุงูููุงุกุฉ</label>
        <label><input type="radio" name="s4" value="3">ููุงุกุฉ ููุฎูุถุฉ ุฌุฏูุง</label>
      </div>

      <div class="q">5. ุฎูุงู ุงูุดูุฑ ุงููุงุถูุ ูู ูุฑุฉ ูุงุฌูุช ุงุถุทุฑุงุจุงุช ููู (ุงุณุชููุงุธุ ุงูุญุงุฌุฉ ููุญูุงูุ ุฃุญูุงู ูุฒุนุฌุฉุ ุฃููโฆ)ุ</div>
      <div class="opts">
        <label><input type="radio" name="s5" value="0" required>ูู ูุญุฏุซ</label>
        <label><input type="radio" name="s5" value="1">ุฃูู ูู ูุฑุฉ ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s5" value="2">ูุฑุฉ ุฃู ูุฑุชูู ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s5" value="3">ุซูุงุซ ูุฑุงุช ุฃู ุฃูุซุฑ ุฃุณุจูุนููุง</label>
      </div>

      <div class="q">6. ูู ูุฑุฉ ุชูุงููุช ุฃุฏููุฉ ูุณุงุนุฏุฉ ุนูู ุงูููู ุฎูุงู ุงูุดูุฑ ุงููุงุถูุ</div>
      <div class="opts">
        <label><input type="radio" name="s6" value="0" required>ูู ูุญุฏุซ</label>
        <label><input type="radio" name="s6" value="1">ุฃูู ูู ูุฑุฉ ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s6" value="2">ูุฑุฉ ุฃู ูุฑุชูู ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s6" value="3">ุซูุงุซ ูุฑุงุช ุฃู ุฃูุซุฑ ุฃุณุจูุนููุง</label>
      </div>

      <div class="q">7. ูู ูุฑุฉ ูุงุฌูุช ุตุนูุจุฉ ูู ุงูุจูุงุก ูุณุชููุธูุง ุฎูุงู ุงูููุงุฑ (ููุงุฏุฉ/ุฃูู/ูุดุงุท ุงุฌุชูุงุนู)ุ</div>
      <div class="opts">
        <label><input type="radio" name="s7" value="0" required>ูู ูุญุฏุซ</label>
        <label><input type="radio" name="s7" value="1">ุฃูู ูู ูุฑุฉ ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s7" value="2">ูุฑุฉ ุฃู ูุฑุชูู ุฃุณุจูุนููุง</label>
        <label><input type="radio" name="s7" value="3">ุซูุงุซ ูุฑุงุช ุฃู ุฃูุซุฑ ุฃุณุจูุนููุง</label>
      </div>

      <div class="note">ุชูุณูุฑ ูุฌููุน PSQI (ุงููููููุงุช): 0โ4 = ููู ุฌูุฏ ุฌุฏุงู ุ 5โ9 = ููู ูุชูุณุท ุ 10โ14 = ููู ุถุนูู ุ โฅ15 = ุงุถุทุฑุงุจ ููู ุดุฏูุฏ.</div>
    </div>

    <div class="actions">
      <button type="submit">ุฅุฑุณุงู ูุญุณุงุจ ุงููุชุงุฆุฌ / Submit</button>
    </div>
  </form>

  <div id="resultBox" style="display:none"></div>

  <footer>
    <div class="note">๐ ุงุดุชุฑู ูุชุตูู ุฃุฏูุงุช ุจุญุซ ุฌุฏูุฏุฉ โ Subscribe link below</div>
    <a href="https://script.google.com/macros/s/AKfycbxY3hqUdNCnGz6N0_b1KHlQVJCXmlSNCtEMpNJvOo1MhoozlVaR2HE7wyao_EctK3M/exec" target="_blank">ุงุดุชุฑู / Subscribe</a>
  </footer>
</div>

<script>
/*
  single-file HTML:
  - sends full item responses, totals and textual results to Google Apps Script Web App
  - uses gender-specific cutoff for SAS-SV (male >=31, female >=33)
*/

const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxYTCcpvnUqWLlQ1_XlebFmWYuaEvcPwdc8TElffM-pIknh3mYEprraa957hNrysEkCLA/exec"; // your web app

function getValue(form, name){
  const el = form.querySelector('[name="'+name+'"]:checked');
  return el ? el.value : null;
}

function calcPSQIScore(form){
  // We use the 7-component simplified scoring: each s1..s7 already 0-3
  let total = 0;
  for(let i=1;i<=7;i++){
    let v = parseInt(getValue(form,'s'+i));
    if(isNaN(v)) v = 0;
    total += v;
  }
  return total;
}

function calcSASTotal(form){
  let total = 0;
  for(let i=1;i<=10;i++){
    let v = parseInt(getValue(form,'q'+i));
    if(isNaN(v)) v = 0;
    total += v;
  }
  return total;
}

document.getElementById('mainForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const form = e.target;

  // check required
  // (browsers will enforce required on each q and s via attributes, but double-check)
  for(let i=1;i<=10;i++){
    if(getValue(form,'q'+i) === null){ alert('ุงูุฑุฌุงุก ุงูุฅุฌุงุจุฉ ุนูู ุฌููุน ุจููุฏ ูููุงุณ ุฅุฏูุงู ุงููุงุชู.'); return; }
  }
  for(let i=1;i<=7;i++){
    if(getValue(form,'s'+i) === null){ alert('ุงูุฑุฌุงุก ุงูุฅุฌุงุจุฉ ุนูู ุฌููุน ุจููุฏ ูููุงุณ ุฌูุฏุฉ ุงูููู.'); return; }
  }
  const gender = getValue(form,'gender') || 'other';
  const name = document.getElementById('name').value || '';

  // compute totals
  const sasTotal = calcSASTotal(form); // 10..50
  const psqiTotal = calcPSQIScore(form); // 0..21

  // interpret SAS with gender-specific cutoff
  let sasTextEN='', sasTextAR='';
  if(gender === 'male'){
    if(sasTotal >= 31){ sasTextAR='ุฅุฏูุงู ูุฑุชูุน ูููุงุชู (ุญุณุจ cutoff ููุฐููุฑ)'; sasTextEN='High smartphone addiction (male cutoff)'; }
    else if(sasTotal >= 21){ sasTextAR='ุงุณุชุฎุฏุงู ูุฑุชูุน/ูููู ูููุงุชู'; sasTextEN='High/problematic use'; }
    else { sasTextAR='ุงุณุชุฎุฏุงู ุทุจูุนู ูููุงุชู'; sasTextEN='Normal smartphone use'; }
  } else if(gender === 'female'){
    if(sasTotal >= 33){ sasTextAR='ุฅุฏูุงู ูุฑุชูุน ูููุงุชู (ุญุณุจ cutoff ููุฅูุงุซ)'; sasTextEN='High smartphone addiction (female cutoff)'; }
    else if(sasTotal >= 21){ sasTextAR='ุงุณุชุฎุฏุงู ูุฑุชูุน/ูููู ูููุงุชู'; sasTextEN='High/problematic use'; }
    else { sasTextAR='ุงุณุชุฎุฏุงู ุทุจูุนู ูููุงุชู'; sasTextEN='Normal smartphone use'; }
  } else { // other / unspecified: use conservative cutoff 31
    if(sasTotal >= 31){ sasTextAR='ุฅุฏูุงู ูุฑุชูุน ูุญุชูู ูููุงุชู'; sasTextEN='Possible high smartphone addiction'; }
    else if(sasTotal >= 21){ sasTextAR='ุงุณุชุฎุฏุงู ูุฑุชูุน/ูููู ูููุงุชู'; sasTextEN='High/problematic use'; }
    else { sasTextAR='ุงุณุชุฎุฏุงู ุทุจูุนู ูููุงุชู'; sasTextEN='Normal smartphone use'; }
  }

  // interpret PSQI
  let psqiTextAR='', psqiTextEN='';
  if(psqiTotal >= 15){ psqiTextAR='ุงุถุทุฑุงุจ ููู ุดุฏูุฏ'; psqiTextEN='Severe sleep disorder'; }
  else if(psqiTotal >= 10){ psqiTextAR='ููู ุถุนูู'; psqiTextEN='Poor sleep quality'; }
  else if(psqiTotal >= 5){ psqiTextAR='ููู ูุชูุณุท ุงูุฌูุฏุฉ'; psqiTextEN='Fair sleep quality'; }
  else { psqiTextAR='ููู ุฌูุฏ ุฌุฏูุง'; psqiTextEN='Very good sleep'; }

  // show on page
  const resultBox = document.getElementById('resultBox');
  resultBox.style.display = 'block';
  resultBox.innerHTML = `
    <div style="text-align:center">
      <div style="font-weight:700;margin-bottom:6px">ูุชุงุฆุฌู / Your results</div>
      <div><strong>SAS-SV (ูุฌููุน):</strong> ${sasTotal} โ ${sasTextAR} <span style="color:#666">(${sasTextEN})</span></div>
      <div><strong>PSQI (ูุฌููุน ุงููููููุงุช):</strong> ${psqiTotal} โ ${psqiTextAR} <span style="color:#666">(${psqiTextEN})</span></div>
    </div>
    <div class="note" style="margin-top:8px;color:#444">ููุงุญุธุฉ: ูุฐู ูุชุงุฆุฌ ุฃูููุฉ ูุฃุบุฑุงุถ ุงูุจุญุซ/ุงูุชูุนูุฉ ูููุณุช ุชุดุฎูุตูุง ุณุฑูุฑููุง.</div>
  `;

  // prepare payload: include every item value for full record
  const payload = {
    timestamp: new Date().toISOString(),
    name: name,
    gender: gender,
    sas_total: sasTotal,
    psqi_total: psqiTotal,
    sas_text_ar: sasTextAR,
    sas_text_en: sasTextEN,
    psqi_text_ar: psqiTextAR,
    psqi_text_en: psqiTextEN,
    // include all item responses
    items: {}
  };
  for(let i=1;i<=10;i++) payload.items['q'+i] = parseInt(getValue(form,'q'+i));
  for(let i=1;i<=7;i++) payload.items['s'+i] = parseInt(getValue(form,'s'+i));

  // send to Google Apps Script Web App
  try {
    const res = await fetch(WEB_APP_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload)
    });
    const text = await res.text();
    console.log('WebApp response:', text);
  } catch (err) {
    console.error('Send error:', err);
    alert('ูุดู ุฅุฑุณุงู ุงูุจูุงูุงุช ุฅูู ุงูุฎุงุฏู. ุชุฃูุฏ ูู ูุดุฑ Web App ูุฃู Who has access = Anyone.');
  }
});
</script>
</body>
</html>
